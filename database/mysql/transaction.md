### 事务
* 并发事务带来哪些问题？
    * 脏读
    > 在使用事务时，有一行数据刚更新，另一个查询读到了这个刚更新的值。这样就导致了脏读，因为更新的数据还没有进行持久化，更新业务可能会进行回滚，所以读到的数据就是无效的
    * 丢失修改
    > 事务1和事务2读取到了相同的一条记录，事务1和事务2都对数据进行了更新操作，这样就会有个事务的修改丢失。
    * 不可重复读
    > 指在一个事务中在多次读取一条数据时，另一个事务也访问到该数据，并进行了更新操作，会导致第一个事务在两次读取到的数据不一致。
    * 幻读
    > 一次事务多次执行相同条件的查询，返回的却是不同的结果。是因为别的事务执行了插入或删除操作，影响了相同条件下的查询结果。
* 事务隔离级别
    * READ-UNCOMMITTEDT(读未提交)
    > 允许读取并发事务中未提交的数据变更。可能会导致脏读、幻读和不可重复读。
    * READ-COMMITTED(读已提交)
    > 允许读取并发事务中已提交的数据变更。可能会导致幻读和不可重复读。
    * REPEATABLE-READ(可重复读)
    > 多次读取的结果是一致的。可能会导致幻读。
    * SERIALIZABLE(串行化)
    > 完全服从ACID的隔离级别。所有事务依次执行。
* 查看Mysql数据库的默认隔离级别(可重复读)
    ```
    SELECT @@tx_isolation;
    ```
* InnoDB存储引擎的锁算法
    * Record lock: 单个行上的锁
    * Gap lock: 间隙锁，锁定一个范围，不包括记录本身
    * Next-key lock: record + gap, 锁定一个范围，包括记录本身
* 大表优化
    * 限定查询的数据范围
    * 读写分离
    * 垂直分区