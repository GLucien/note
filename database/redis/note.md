### redis
* redis有什么优缺点
    * 优点
        * 操作内存，速度快
        * 数据结构丰富
        * 支持持久化(RDB和AOF)
    * 缺点
        * 受内存大小限制
        * 持久化时比较占用CPU
* 为什么redis是单线程的？
    * 没有锁的性能消耗，也保证了每个操作的原子性
    * 没有线程的上线文切换和竞争

* redis 和 memcached 区别
    * redis支持更多的数据类型，memcached只支持简单的数据类string
    * redis支持持久化，可以将内存中的数据保存在磁盘上，重启的时候会再次加载到内存中，而memcached把数据都存在内存中。
    * redis有原生的集群模式
    * memcached是多线程，非阻塞IO复用的网络模型；redis使用单线程的多路IO复用模型。

* 驱逐策略
    * 不删除(NoEviction)，达到最大内存限制时，且还需要更多内存就直接返回错误信息
    * AllKeys-LRU，适用所有key，最近最少使用
    * Volatile-LRU，适用设置过期时间的key，最近最少使用
    * AllKeys-Random，适用所有key，随机删除
    * Volatile-Random，适用设置过期时间的key，随机删除
    * Volatile-TTL，适用设置过期时间的key，优先删除剩余时间短的key

* redis有哪几种持久化方式？
    * 全量RDB持久化，在指定时间，fork一个子进程，将数据写入到临时文件，完成后替换之前的文件，用二进制压缩存储。持久化之前宕机会丢失数据，且fork子进程占用资源
    * 增量AOF持久化，将每一个非读操作都记录到文件中，就算宕机，也会在下次重启redis时，文件中的命令重新被执行一次，重建数据

* 什么是缓存穿透？如何解决？
    1. 查询一个一定不存在的数据，缓存中不存在，就会去数据查询，而数据库中不存在则不会写缓存，导致每次查询都会查库。
    2. 解决：对空数据进行缓存，并设置过期时间

* 什么是缓存雪崩？如何解决？
    1. 缓存无法使用时导致请求全部到达数据库，导致数据库崩溃
    2. 解决：保证缓存高可用，数据库限流以及服务降级

* 什么是缓存击穿？如何解决？
    1. 当某个key失效时，大量的请求进入，将数据库瞬间压垮。
    2. 解决：使用锁，确保只有一个线程去查库。

* 过期键删除策略
    * 主动删除
        1. 定时删除，定时器，比较占用CPU
        2. 定期删除，每隔一段时间删除过期键
    * 被动删除
        1. 惰性删除，在取出键时检查是否过期。

